.SH Name
Project 2: Memory Management
.SH Synopsis
Implementing a memory manager in C++, whose features include initializing,
tracking,
allocating, and deallocating sections of memory.
.SH DESCRIPTION
.B Filespaths and Filed Edited
.PP
/home/reptilian/MemoryManager/Allocators.cpp
.PP
/home/reptilian/MemoryManager/MemoryManager.cpp
.PP
/home/reptilian/MemoryManager/Makefile
.PP
.B Tracking and Data Structures
.PP
By utilizing a vector of pairs for holes and a map for the spaces
allocated. The vector lists where each hole starts and how big it is. The
map connects the start of each allocated spaces to its sizes. This allows
me to manage where and how memory is used or freed.
.PP
.B Allocation functions (allocate, free, bestFit/worstFit)
.PP
Allocate requests a block of memory of a certain size, and calculates how
many words are needed to satisy the byte size requested and accounts for
the alignment to the word size.
.PP
The Free function frees a previously allocated block of memory at a given
address
.PP
bestFit/worseFit function is used for selecting a hole for new
allocations. Both functions take a list of holes that are generated by
getList and the requested size in words, and return the offset of the
start of the chosen hole.
.PP
bestFit looks for the smallest hole that is big enough to allocate the
requested size, minimizing wasted space.
.PP
worseFit looks for the largest available hole, on the assumption that this
will leave the most usable space after the allocation
.PP
.B Required function descriptions
.PP
MemoryManager Constructor: Initializes the memory manager with a given
word size and allocation strategy.
.PP
MemoryManager Destructor: Cleans up resources, ensuring no memory leaks
upon object destruction.
.PP
initialize(size_t sizeInWords): Sets the memory block for use, marking it
entirely as a free hole.
.PP
shutdown(): Frees the allocated memory block and resets internal
structures, preparing for shutdown.
.PP
getList(): Returns a dynamically allocated list of free memory holes for
the allocator's use.
.PP
getBitmap(): Generates a bitmap representation of the memory's allocation
status.
.PP
* setAllocator(std::function<int(int, void)> newAllocator)**: Sets a new
allocation strategy function.
.PP
dumpMemoryMap(const std::string& filename): Outputs the current memory
allocation map to a file.
.PP
adjustHolesAfterAllocation(int wordOffset, size_t wordsNeeded): Updates
the holes list after a new allocation.
.PP
mergeOrAddHole(size_t wordOffset, size_t blockSize): Merges adjacent holes
or adds a new hole after freeing memory.
.PP
mergeAdjacentHoles(): Combines neighboring free holes into larger ones to
optimize space usage.
.PP
.B POSIX calls
.PP
'open' was used to open a file descriptor for the specified file
.PP
'write' was used to take an open file descriptor and write the data from
the buffer to the file associated with the file descriptor
.PP
'close' was used to avoid memory leaks, it calls with the file descriptor
to close the file, releasing the file descriptor and any system resources
associated with it.
.PP
.SH TESTING
Testing was done by using valgrind in a fresh kernel. The command used was
'valgrind ./CommandLineTest' and by manually reviewing the code to ensure
every 'new' or 'malloc' has a corresponding 'delete' or 'free'. GDB was
also used to inspect my program which was especially helpful for the
allocation and deallocation processes.
.SH BUGS
One issue I faced was not properly aligning the requesteds size with the
word size and incorrectly calculating the number of words needed.
.PP
.SH SCREENCAST LINK
.PP
https://youtu.be/ohcLrM7FHs8
.PP
.SH REFERENCES/CITATIONS
Project2 Instruction PDF, Discussion video,
https://www.youtube.com/watch?v=wJ1L2nSIV1s,
https://www.youtube.com/watch?v=2ybLD6_2gKM
.SH AUTHOR
Hongjie Shi
